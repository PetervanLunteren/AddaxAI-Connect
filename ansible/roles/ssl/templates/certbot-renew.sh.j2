#!/bin/bash
# Automatic SSL certificate renewal script
# Generated by Ansible for AddaxAI Connect

set -e

echo "=== Certbot Renewal Check: $(date) ==="

# Attempt to renew certificates
certbot renew --quiet --nginx

# Reload nginx if certificates were renewed
if [ $? -eq 0 ]; then
    echo "Certificate renewal check completed successfully"
    systemctl reload nginx
    echo "Nginx reloaded"
else
    echo "Certificate renewal failed"
    exit 1
fi

echo "=== Renewal complete: $(date) ==="
