<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ project_name }} - {{ frequency }} report</title>
    <!--[if mso]>
    <style type="text/css">
        table { border-collapse: collapse; }
        .fallback-font { font-family: Arial, sans-serif; }
    </style>
    <![endif]-->
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; font-size: 16px; line-height: 1.6; color: #1f2937; background-color: #f3f4f6;">
    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="background-color: #f3f4f6;">
        <tr>
            <td align="center" style="padding: 20px;">
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" style="max-width: 600px; background: #ffffff; border-radius: 12px; overflow: hidden;">

                    <!-- Header -->
                    <tr>
                        <td style="background: rgba(15, 96, 100, 0.1); padding: 32px 24px; text-align: center;">
                            <img src="data:image/png;base64,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" alt="AddaxAI" width="200" height="75" style="display: block; margin: 0 auto 20px auto;" />
                            <h1 style="font-size: 24px; font-weight: 600; margin: 0 0 4px 0; color: #0f6064;">{{ project_name }}</h1>
                            <p style="font-size: 16px; font-weight: 500; margin: 0; color: #1f2937;">{{ frequency }} report</p>
                            <p style="font-size: 14px; color: #6b7280; margin: 4px 0 0 0;">{{ period_label }}</p>
                        </td>
                    </tr>

                    <!-- Quick Stats -->
                    <tr>
                        <td style="padding: 20px 24px; border-bottom: 1px solid #e5e7eb;">
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                                <tr>
                                    <td width="33%" align="center" style="padding: 10px;">
                                        <p style="font-size: 28px; font-weight: 700; color: #0f6064; line-height: 1.2; margin: 0;">{{ stats.new_images }}</p>
                                        <p style="font-size: 12px; color: #6b7280; margin: 2px 0 0 0;">images</p>
                                    </td>
                                    <td width="33%" align="center" style="padding: 10px;">
                                        <p style="font-size: 28px; font-weight: 700; color: #0f6064; line-height: 1.2; margin: 0;">{{ stats.detections }}</p>
                                        <p style="font-size: 12px; color: #6b7280; margin: 2px 0 0 0;">detections</p>
                                    </td>
                                    <td width="33%" align="center" style="padding: 10px;">
                                        <p style="font-size: 28px; font-weight: 700; color: #0f6064; line-height: 1.2; margin: 0;">{{ stats.species_count }}</p>
                                        <p style="font-size: 12px; color: #6b7280; margin: 2px 0 0 0;">species</p>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    {% if species and species|length > 0 %}
                    <!-- Top Species -->
                    <tr>
                        <td style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
                            <h2 style="font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 16px 0;">Top species</h2>
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                                {% for sp in species[:5] %}
                                <tr>
                                    <td width="30" style="padding: 10px 0; {% if not loop.last %}border-bottom: 1px solid #f3f4f6;{% endif %}">
                                        <span style="font-size: 14px; font-weight: 600; color: #6b7280;">{{ loop.index }}.</span>
                                    </td>
                                    <td style="padding: 10px 0; {% if not loop.last %}border-bottom: 1px solid #f3f4f6;{% endif %}">
                                        <span style="font-size: 15px; color: #1f2937;">{{ sp.species|replace('_', ' ')|title }}</span>
                                    </td>
                                    <td align="right" style="padding: 10px 0; {% if not loop.last %}border-bottom: 1px solid #f3f4f6;{% endif %}">
                                        <span style="font-size: 15px; font-weight: 600; color: #0f6064;">{{ sp.count }}</span>
                                    </td>
                                </tr>
                                {% endfor %}
                            </table>
                        </td>
                    </tr>
                    {% endif %}

                    <!-- Camera Health -->
                    <tr>
                        <td style="padding: 24px; border-bottom: 1px solid #e5e7eb;">
                            <h2 style="font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 16px 0;">Cameras</h2>
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                                <tr>
                                    <td>
                                        {% if cameras.inactive == 0 and cameras.low_battery_count == 0 %}
                                        <span style="color: #0f6064; font-weight: 600;">&#10003; {{ cameras.active }}/{{ cameras.total }} active</span>
                                        {% else %}
                                        <span style="color: #882000; font-weight: 600;">{{ cameras.active }}/{{ cameras.total }} active</span>
                                        {% endif %}
                                        &nbsp;&nbsp;
                                        <span style="font-size: 14px; color: #6b7280;">Avg battery {{ cameras.avg_battery }}%</span>
                                        &nbsp;&nbsp;
                                        <span style="font-size: 14px; color: #6b7280;">Avg SD {{ cameras.avg_sd }}%</span>
                                    </td>
                                </tr>
                            </table>

                            {% if cameras.low_battery_count > 0 or cameras.inactive > 0 %}
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-top: 12px;">
                                <tr>
                                    <td style="background: #fff5f0; border-left: 3px solid #882000; border-radius: 0 8px 8px 0; padding: 12px 16px;">
                                        {% if cameras.low_battery_count > 0 %}
                                        <p style="font-size: 13px; font-weight: 600; color: #882000; margin: 0 0 4px 0;">Low battery ({{ cameras.low_battery_count }})</p>
                                        <p style="font-size: 13px; color: #882000; margin: 0;">
                                            {% for cam in cameras.low_battery_cameras[:3] %}
                                            {{ cam.name }} ({{ cam.battery }}%){% if not loop.last %}, {% endif %}
                                            {% endfor %}
                                        </p>
                                        {% endif %}
                                        {% if cameras.inactive > 0 %}
                                        <p style="font-size: 13px; font-weight: 600; color: #882000; margin: {% if cameras.low_battery_count > 0 %}8px{% else %}0{% endif %} 0 0 0;">Inactive ({{ cameras.inactive }})</p>
                                        {% endif %}
                                    </td>
                                </tr>
                            </table>
                            {% endif %}
                        </td>
                    </tr>

                    <!-- CTA Button -->
                    <tr>
                        <td align="center" style="padding: 24px;">
                            <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                                <tr>
                                    <td style="background: #0f6064; border-radius: 8px;">
                                        <a href="{{ project_url }}" style="display: inline-block; padding: 14px 32px; font-size: 15px; font-weight: 600; color: #ffffff; text-decoration: none;">Visit project</a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                </table>

                <!-- Footer -->
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="600" style="max-width: 600px;">
                    <tr>
                        <td align="center" style="padding: 24px; color: #6b7280; font-size: 13px;">
                            <p style="margin: 0;"><a href="{{ settings_url }}" style="color: #0f6064; text-decoration: none;">Manage notification settings</a></p>
                            <p style="margin: 12px 0 0 0;">
                                AddaxAI Connect<br>
                                Camera trap image processing platform
                            </p>
                        </td>
                    </tr>
                </table>

            </td>
        </tr>
    </table>
</body>
</html>
